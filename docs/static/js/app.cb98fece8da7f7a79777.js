webpackJsonp([1],{"0pd7":function(t,e,n){"use strict";var o=n("J+oA");e.a={name:"list",components:{VoteOption:o.a},computed:{options:function(){return this.$store.state.vote.options}}}},"47xB":function(t,e){},"7zPv":function(t,e,n){"use strict";var o=n("AYdz");e.a={name:"result",components:{SvgChart:o.a},computed:{options:function(){return this.$store.state.vote.options},votes:function(){return this.$store.state.vote.votes},sortedOptions:function(){var t=this;return this.options.map(function(e){var n=t.votes.filter(function(t){return t.optionId===e.id}).length;return{name:e.text,id:e.id,voteCount:n}}).sort(function(t,e){return t.voteCount-e.voteCount}).slice().reverse()}}}},AYdz:function(t,e,n){"use strict";function o(t){n("Vo9+")}var i=n("YhF4"),s=n("e9T1"),r=n("VU/8"),a=o,u=r(i.a,s.a,!1,a,null,null);e.a=u.exports},BBEb:function(t,e,n){"use strict";function o(t){n("47xB")}var i=n("IY4k"),s=n("k+Ls"),r=n("VU/8"),a=o,u=r(i.a,s.a,!1,a,"data-v-1bae885a",null);e.a=u.exports},"D+VX":function(t,e,n){"use strict";var o={isAuthenticated:!1,currentUser:""},i={login:function(t,e){var n=e.username;t.isAuthenticated=!0,t.currentUser=n}};e.a={state:o,mutations:i}},DMyz:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"result"},t._l(t.sortedOptions,function(t){return n("div",[n("svg-chart",{attrs:{option:t}})],1)}))},i=[],s={render:o,staticRenderFns:i};e.a=s},FcqW:function(t,e,n){"use strict";e.a={name:"vote-option",props:["option","allVotes"],computed:{votes:function(){var t=this;return this.$store.state.vote.votes.filter(function(e){return e.optionId==t.option.id})},voted:function(){var t=this;return this.votes.filter(function(e){return e.voter===t.currentUser}).length},currentUser:function(){return this.$store.state.auth.currentUser}},methods:{undo:function(){var t=this,e=this.votes.find(function(e){return e.voter===t.currentUser});console.log("undo",e.id),this.$store.dispatch({type:"undo",voteId:e.id})},voteup:function(){if(!this.voted&&this.currentUser){var t={voter:this.currentUser,optionId:this.option.id};this.$store.dispatch({type:"voteup",vote:t})}}}}},Fs8J:function(t,e,n){"use strict";var o=n("gosb"),i=n("BBEb"),s=n("tcnj"),r=n("N/0d");e.a={name:"home",data:function(){return{msg:"Welcome to Your Vue.js App"}},components:{LoginForm:o.a,NewOption:i.a,List:s.a,Result:r.a}}},IY4k:function(t,e,n){"use strict";e.a={name:"new-option",data:function(){return{text:""}},methods:{addOption:function(){console.log(this.text),this.$store.dispatch({type:"addOption",text:this.text}),this.text=""}}}},IaBt:function(t,e){},IcnI:function(t,e,n){"use strict";var o=n("7+uW"),i=n("NYxO"),s=n("D+VX"),r=n("QFJm");o.a.use(i.a),e.a=new i.a.Store({modules:{auth:s.a,vote:r.a}})},"J+oA":function(t,e,n){"use strict";function o(t){n("JEMR")}var i=n("FcqW"),s=n("qVAE"),r=n("VU/8"),a=o,u=r(i.a,s.a,!1,a,"data-v-5134135e",null);e.a=u.exports},JEMR:function(t,e){},M93x:function(t,e,n){"use strict";function o(t){n("XVee")}var i=n("xJD8"),s=n("oNiQ"),r=n("VU/8"),a=o,u=r(i.a,s.a,!1,a,null,null);e.a=u.exports},"N/0d":function(t,e,n){"use strict";function o(t){n("IaBt")}var i=n("7zPv"),s=n("DMyz"),r=n("VU/8"),a=o,u=r(i.a,s.a,!1,a,"data-v-17b5bc6f",null);e.a=u.exports},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("7+uW"),i=n("M93x"),s=n("IcnI");o.a.config.productionTip=!1,new o.a({el:"#app",store:s.a,template:"<App/>",components:{App:i.a}})},OoJv:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"list"},t._l(t.options,function(t){return n("div",{staticClass:"option"},[n("vote-option",{attrs:{option:t}})],1)}))},i=[],s={render:o,staticRenderFns:i};e.a=s},QFJm:function(t,e,n){"use strict";var o=n("Dd8w"),i=n.n(o),s=n("mtWM"),r=(n.n(s),n("Z8es")),a=n.n(r),u={options:[{text:"鱼香肉丝",id:"we34s"},{text:"宫保鸡丁",id:"res76"}],votes:[{voter:"peter",optionId:"res76",id:"wes32"},{voter:"billie",optionId:"res76",id:"432de"}]},c={addOption:function(t,e){t.options.push(e)},voteup:function(t,e){t.votes.push(e)},undo:function(t,e){t.votes=t.votes.filter(function(t){return t.id!==e})}},v={undo:function(t,e){(0,t.commit)("undo",e.voteId)},addOption:function(t,e){(0,t.commit)("addOption",{text:e.text,id:a.a.generate()})},voteup:function(t,e){var n=t.commit,o=e.vote,s=i()({},o,{id:a.a.generate()});console.log(s),n("voteup",s)}};e.a={state:u,mutations:c,actions:v}},"Vo9+":function(t,e){},XVee:function(t,e){},YTGM:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("div",{staticClass:"wrap"},[n("login-form")],1),t._v(" "),n("div",{staticClass:"wrap"},[n("list")],1),t._v(" "),n("div",{staticClass:"wrap"},[n("new-option")],1),t._v(" "),n("div",{staticClass:"wrap"},[n("result")],1)])},i=[],s={render:o,staticRenderFns:i};e.a=s},YhF4:function(t,e,n){"use strict";e.a={name:"svg-chart",props:["option"],computed:{totalVotes:function(){return this.$store.state.vote.votes.length},percent:function(){return(this.option.voteCount/this.totalVotes).toFixed(2)},percentStr:function(){return 100*this.percent+" 100"}}}},b39Z:function(t,e){},cpOb:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login-form"},[t.isAuthenticated?n("div",[t._v("\n    我是 "+t._s(t.currentUser)+"\n  ")]):n("div",[t._v("\n    你是\n    "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),t._v(" "),n("button",{on:{click:t.login}},[t._v("保存")])])])},i=[],s={render:o,staticRenderFns:i};e.a=s},e9T1:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",[t._v(t._s(t.option.name))]),t._v(" "),n("h1",[t._v(t._s(100*t.percent+"%"))]),t._v(" "),n("svg",{attrs:{width:"100",height:"100",viewBox:"0 0 32 32"}},[n("circle",{attrs:{id:"background",r:"16",cx:"16",cy:"16",fill:"#fff",stroke:"yellow","stroke-width":"12"}}),t._v(" "),n("circle",{attrs:{id:"percent",r:"16",cx:"16",cy:"16",fill:"#fff","fill-opacity":"0.5",stroke:"deeppink","stroke-width":"12","stroke-dasharray":t.percentStr}})])])},i=[],s={render:o,staticRenderFns:i};e.a=s},gosb:function(t,e,n){"use strict";function o(t){n("qrPK")}var i=n("pFqp"),s=n("cpOb"),r=n("VU/8"),a=o,u=r(i.a,s.a,!1,a,"data-v-52b45d6b",null);e.a=u.exports},"k+Ls":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"new-option"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],domProps:{value:t.text},on:{input:function(e){e.target.composing||(t.text=e.target.value)}}}),t._v(" "),n("button",{on:{click:t.addOption}},[t._v("添加")])])},i=[],s={render:o,staticRenderFns:i};e.a=s},lO7g:function(t,e,n){"use strict";function o(t){n("b39Z")}var i=n("Fs8J"),s=n("YTGM"),r=n("VU/8"),a=o,u=r(i.a,s.a,!1,a,"data-v-34a5029e",null);e.a=u.exports},oNiQ:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("home")],1)},i=[],s={render:o,staticRenderFns:i};e.a=s},pFqp:function(t,e,n){"use strict";e.a={name:"login-form",methods:{login:function(){this.username.trim()&&(this.$store.commit("login",{username:this.username}),this.username="")}},data:function(){return{username:""}},computed:{isAuthenticated:function(){return this.$store.state.auth.isAuthenticated},currentUser:function(){return this.$store.state.auth.currentUser}}}},qVAE:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"option"},[n("div",{staticClass:"title"},[n("div",{staticClass:"text"},[t._v("\n      "+t._s(t.option.text)+"\n    ")])]),t._v(" "),n("div",{staticClass:"votes"},t._l(t.votes,function(e){return n("div",{staticClass:"vote"},[t._v("\n      "+t._s(e.voter)+"\n    ")])})),t._v(" "),n("div",{staticClass:"action"},[t.voted?n("div",[n("button",{staticClass:"vote-btn voted",on:{click:t.undo}},[t._v("已投")])]):n("div",[n("button",{staticClass:"vote-btn",on:{click:t.voteup}},[t._v("投票")])])])])},i=[],s={render:o,staticRenderFns:i};e.a=s},qrPK:function(t,e){},tcnj:function(t,e,n){"use strict";var o=n("0pd7"),i=n("OoJv"),s=n("VU/8"),r=s(o.a,i.a,!1,null,null,null);e.a=r.exports},xJD8:function(t,e,n){"use strict";var o=n("lO7g");e.a={name:"app",components:{Home:o.a}}}},["NHnr"]);
//# sourceMappingURL=app.cb98fece8da7f7a79777.js.map